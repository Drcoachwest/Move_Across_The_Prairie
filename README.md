# Move Across the Prairie

A secure web application for teachers to access curriculum materials and manage lesson planning.

<!-- TODO: Tests will be added during pilot hardening phase -->

## Features

- **Email Authentication**: Sign in with @gpisd.org email addresses only
- **Activation Code System**: Secure access control with admin-generated activation codes
- **Curriculum Library**: Browse, view, and download curriculum documents (PDFs, Word docs, links)
- **Lesson Plan Builder**: Create lesson plans with templates and save your work
- **Admin Dashboard**: Manage users, activation codes, documents, and system activity

## Project Structure

```
src/
├── app/
│   ├── page.tsx              # Home page
│   ├── layout.tsx            # Root layout
│   ├── auth/                 # Authentication pages
│   │   ├── signin/          # Teacher sign-in page
│   │   └── admin/           # Admin login page
│   ├── dashboard/           # Teacher dashboard
│   │   ├── page.tsx         # Dashboard home
│   │   ├── curriculum/      # Curriculum library page
│   │   └── lesson-plans/    # Lesson plan management
│   ├── admin/               # Admin pages
│   │   ├── dashboard/       # Admin main dashboard
│   │   ├── activation-codes/ # Manage activation codes
│   │   ├── users/           # User management
│   │   ├── documents/       # Document management
│   │   └── logs/            # Activity logs
│   └── api/                 # API endpoints
│       ├── auth/            # Authentication APIs
│       ├── curriculum/      # Curriculum APIs
│       ├── lessons/         # Lesson plan APIs
│       └── admin/           # Admin APIs
├── components/              # Reusable React components
├── lib/                     # Utility functions and helpers
└── styles/                  # Global styles

prisma/
└── schema.prisma            # Database schema

.env.example                 # Environment variables template
```

## Technology Stack

- **Frontend**: Next.js 15, React 19, Tailwind CSS
- **Backend**: Next.js API Routes
- **Database**: PostgreSQL with Prisma ORM
- **Authentication**: Email verification + activation codes
- **Styling**: Tailwind CSS

## Getting Started

### Prerequisites

- Node.js 18+ and npm
- PostgreSQL database
- Git

### Installation

1. **Clone the repository** (or open the project folder)

2. **Install dependencies**:
   ```bash
   npm install
   ```

3. **Set up environment variables**:
   ```bash
   cp .env.example .env.local
   ```
   Edit `.env.local` and configure:
   - `DATABASE_URL`: Your PostgreSQL connection string
   - `NEXTAUTH_URL`: Your app URL (http://localhost:3000 for development)
   - `NEXTAUTH_SECRET`: A secret key for sessions (generate with `openssl rand -base64 32`)

4. **Set up the database**:
   ```bash
   npm run db:push
   ```

5. **Run the development server**:
   ```bash
   npm run dev
   ```

   Open [http://localhost:3000](http://localhost:3000) to view the app.

## User Roles

### Teachers
- Sign in with @gpisd.org email
- Enter activation code to unlock access
- Access curriculum library
- Create and manage lesson plans

### Administrators
- Admin login with email and password
- Generate activation codes
- Manage user accounts
- Upload and organize curriculum documents
- View system activity logs

## Database Models

### User
- Stores teacher account information
- Tracks activation status
- Links to lesson plans

### ActivationCode
- Generated by admins
- One-time use per code
- Email-specific or general codes

### CurriculumDocument
- Stores metadata for curriculum materials
- Tracks file type (PDF, Word, link)
- Categorized by subject/grade level

### LessonPlan
- Student work created in the lesson builder
- Saves templates used and content
- Linked to teacher account

### AdminLog
- Tracks all administrative actions
- Audit trail for security

## Next Steps - Implementation Tasks

The project is scaffolded and ready for development. Here are the key features to implement:

1. **Authentication System**
   - [ ] Implement Prisma database schema
   - [ ] Create password hashing for admin accounts
   - [ ] Implement session management
   - [ ] Email validation

2. **Teacher Features**
   - [ ] Curriculum document upload and display
   - [ ] PDF/document preview
   - [ ] Download tracking
   - [ ] Lesson plan save/update functionality

3. **Admin Features**
   - [ ] Activation code generation and tracking
   - [ ] Admin user creation and management
   - [ ] Document upload and organization
   - [ ] User management and deactivation

4. **Security**
   - [ ] Implement HTTPS redirects
   - [ ] Add CSRF protection
   - [ ] Rate limiting for login attempts
   - [ ] Secure file uploads

5. **Polish**
   - [ ] Add loading states
   - [ ] Error handling improvements
   - [ ] Form validation
   - [ ] Responsive design tweaks

## Environment Variables

Create a `.env.local` file:

```
DATABASE_URL=postgresql://user:password@localhost:5432/move_across_the_prairie
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-secret-key-here-change-in-production
NODE_ENV=development
```

## Available Scripts

- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm start` - Start production server
- `npm run lint` - Run ESLint
- `npm run db:push` - Sync Prisma schema with database
- `npm run db:studio` - Open Prisma Studio (visual database manager)

## Security Considerations

- Always use HTTPS in production
- Keep your NEXTAUTH_SECRET secure
- Validate all email addresses
- Implement rate limiting on login endpoints
- Never commit `.env.local` to version control
- Regularly audit admin logs
- Use strong passwords for admin accounts

## Support & Documentation

- [Next.js Documentation](https://nextjs.org/docs)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [Prisma Documentation](https://www.prisma.io/docs)
- [React Documentation](https://react.dev)

## License

Private - All rights reserved to GPISD
